"use strict";$(function(){var o=[];function s(){var s=new Array("1","2","3","4","5","6","7","8","9","0","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),c="";for(i=0;i<4;i++){c+=s[parseInt(Math.random()*s.length)]}$(".obtain").html(c)}$("#phoneNum").on("focus",function(){$(".megTip1").css({display:"block"}),$(".success1").css({display:"none"})}),$("#phoneNum").on("blur",function(){var s=$(this).val().trim();s?checkReg.tel(s)?(console.log(s),$.ajax({type:"post",data:"name="+s,url:"../api/login.php",success:function(s){console.log(s),"no"==s?($(".megTip1 span").html("此账号已经注册"),$(".megTip1").css({display:"block",color:"red"})):"yes"==s&&($(".megTip1 span").html("成功"),$(".megTip1").css({display:"none",color:"green"}),$(".success1").css({display:"block"}),o.push(1))}})):($(".megTip1 span").html("手机号码格式错误"),$(".megTip1").css({display:"block",color:"red"}),$(".success1").css({display:"none"})):($(".megTip1").css({display:"block",color:"red"}),$(".success1").css({display:"none"}))}),$("#password").on("focus",function(){$(".megTip2").css({display:"block"}),$(".success2").css({display:"none"})}),$("#password").on("blur",function(){var s=$(this).val().trim();s?checkReg.psweasy(s)?($(".megTip2").css({display:"none"}),$(".success2").css({display:"block"}),o.push(1)):($(".megTip2 span").html("密码过于单一，建议用字母开头，长度只能在6-18位"),$(".megTip2").css({display:"block",color:"red"}),$(".success2").css({display:"none"})):($(".megTip2").css({display:"block",color:"red"}),$(".megTip2 span").html("密码不能为空"),$(".success2").css({display:"none"}))}),$("#againPsw").on("focus",function(){$(".megTip3").css({display:"block"}),$(".success3").css({display:"none"})}),$("#againPsw").on("blur",function(){var s=$("#password").val().trim(),c=$(this).val().trim();console.log(s,c),s?c==s?($(".megTip3").css({display:"none"}),$(".success3").css({display:"block"}),o.push(1),console.log(1)):($(".megTip3").css({display:"block",color:"red"}),$(".megTip3 span").html("两次密码不一致"),$(".success3").css({display:"none"})):($(".megTip3").css({display:"block",color:"red"}),$(".megTip3 span").html("密码不能为空"),$(".success3").css({display:"none"}))}),s(),$(".obtainBtn").on("click",function(){s()}),$("#authCode").on("focus",function(){$(".megTip4").css({display:"block"}),$(".success4").css({display:"none"})}),$("#authCode").on("blur",function(){var s=$("#authCode").val().trim().toUpperCase(),c=$(".obtain").text().toUpperCase();s?s==c?($(".megTip4").css({display:"none"}),$(".success4").css({display:"block"}),o.push(1)):($(".megTip4").css({display:"block",color:"red"}),$(".megTip4 span").html("验证码错误"),$(".success4").css({display:"none"})):($(".megTip4").css({display:"block",color:"red"}),$(".megTip4 span").html("验证码不能为空"),$(".success4").css({display:"none"}))}),$(".registBtn").on("click",function(){var s=$("#phoneNum").val().trim(),c=$("#password").val().trim();4==o.length&&(console.log(5),$.ajax({type:"post",data:"name="+s+"&psw="+c,url:"../api/insert.php",success:function(s){console.log(s),"yes"==s?(alert("注册成功"),window.location.href="register.html",$("#phoneNum").val(""),$("#password").val(""),$("#againPsw").val(""),$("#authCode").val("")):"no"==s&&alert("注册失败")}}))})});