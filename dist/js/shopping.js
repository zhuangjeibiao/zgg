"use strict";$(function(){var n=$(window).height(),t=$(".shoppingFoot").offset().top;n<t?$(".shoppingFoot").css({position:"fixed",bottom:"0px"}):t<n&&($(".shoppingFoot").css({position:""}),$(window).scroll(function(){var n=$(window).scrollTop();t<=n?$(".shoppingFoot").css({position:"fixed",bottom:"0px"}):$(".shoppingFoot").css({position:""})}));var i=0,o=0;function p(n,t){$.ajax({type:"post",data:"dis="+n+"&shu="+t,url:"../api/addcut.php",success:function(n){}})}function a(n){var t=(1*n.parent().find("input").val()*n.parent().parent().parent().children(".privilege").children().text().slice(1)).toFixed(2);n.parent().parent().parent().children(".shoopSum").children().html("￥"+t),s()}$.ajax({type:"post",url:"../api/shopping1.php",success:function(n){var t=JSON.parse(n);$.each(t,function(n,t){var p='\n                    <div class="shoppingList" data-id="'+t.number+'"> \n                        <div class="shoppingItem">\n                            <div class="itemList">\n                                <div class="itemIup fl">\n                                    <input type="checkbox" name="" id="" value="" style="width: 18px;height: 18px;margin-left: 12px;margin-right: 5px;margin-top: 28px" />\n                                </div>\n                                <div class="shoppImg fl">\n                                    <a href=""><img src="'+t.img+'" alt=""></a>\n                                </div>\n                                <div class="shoopName fl">\n                                    <a href="">'+t.name+'</a>\n                                </div>\n                                <div class="shoppPir fl">\n                                    <strong>￥'+t.agoPir+'</strong>\n                                </div>\n                                <div class="privilege fl">\n                                    <strong>￥'+t.pir+'</strong>\n                                </div>\n                                <div class="shoopNum fl">\n                                    <div class="addReduce">\n                                        <a href="javascript:void(0)"class="cutnum">-</a>\n                                        <input type="text" value="'+t.shu+'" class="nownum">\n                                        <a href="javascript:void(0)" class="addnum">+</a>\n                                    </div>\n                                </div>\n                                <div class="shoopSum fl">\n                                    <span class="nowall">￥'+t.pir*t.shu+'</span>\n                                </div>\n                                <div class="shoppOperation fl">\n                                    <a href="javascript:void(0)" class="del">删除</a><br>\n                                    <a href="javascript:void(0)">移入收藏</a>\n                                </div>\n                            </div>\n                        </div>\n                        </div>';$(".shang").html($(".shang").html()+p),i+=1,o+=1*$(".shang .nownum").eq(i-1).val()}),function(n){$(".carTab-a1 span").html(n)}(o)}}),$(".shang").on("click",".addnum",function(){var n=1*$(this).prev().val();100<=++n&&(n=100),$(this).prev().val(n),p($(this).parent().parent().parent().parent().parent().attr("data-id"),n),a($(this)),s()}),$(".shang").on("click",".cutnum",function(){var n=1*$(this).next().val();--n<=1&&(n=1),$(this).next().val(n),p($(this).parent().parent().parent().parent().parent().attr("data-id"),n),a($(this)),s()}),$(".shang").on("click",".del",function(){var n=confirm("您真的要删除我吗？");if(window.location.href="shopping.html",n){$(this).parent().parent().parent().parent().remove();var t=$(this).parent().parent().parent().parent().attr("data-id");console.log(t),$.ajax({type:"post",data:"dataId="+t,url:"../api/delete.php",success:function(n){}}),s()}}),$(".Checkbox input").on("click",function(){$(".Checkbox input").prop("checked")?($(".shang .itemIup input").prop("checked",!0),$(".shoppingFoot .Checkbox1 input").prop("checked",!0)):($(".shang .itemIup input").prop("checked",!1),$(".shoppingFoot .Checkbox1 input").prop("checked",!1)),s()}),$(".shoppingFoot .Checkbox1 input").on("click",function(){$(".shoppingFoot .Checkbox1 input").prop("checked")?($(".shang .itemIup input").prop("checked",!0),$(".Checkbox input").prop("checked",!0)):($(".shang .itemIup input").prop("checked",!1),$(".Checkbox input").prop("checked",!1)),s()}),$(".shang").on("click",".itemIup input",function(){$(".shang .itemIup input:checked").size()==$(".shang .itemIup input").size()?($(".Checkbox input").prop("checked",!0),$(".shoppingFoot .Checkbox1 input").prop("checked",!0)):($(".Checkbox input").prop("checked",!1),$(".shoppingFoot .Checkbox1 input").prop("checked",!1)),s()});var e=[];function s(){e=[],$(".shang .itemIup input").each(function(n,t){$(".shang .itemIup input").eq(n).prop("checked")&&e.push(n)});var t=0,p=0;e.forEach(function(n){t+=1*$(".shang .nownum").eq(n).val(),p+=1*$(".shang .nowall").eq(n).text().slice(1)}),$(".carTab-a1 span").html(t),$(".shoppingFoot .cor1").html(t),$(".shoppingFoot  .cor2").html(p.toFixed(2)),0<$(".result .cor1").html()?$(".InsideRigSettle").css("background","red"):$(".InsideRigSettle").css("background","")}s(),e=[]});